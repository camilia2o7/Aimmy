<UserControl x:Class="Aimmy2.UILibrary.AColorWheel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:Ant="clr-namespace:AntWpf.Controls;assembly=AntWpf"
             xmlns:local="clr-namespace:Aimmy2.UILibrary"
             mc:Ignorable="d"
             d:DesignWidth="282.5"
             d:DesignHeight="310">
    <Grid>
        <Border Height="310"
                Background="#3F3C3C3C"
                CornerRadius="0"
                BorderThickness="1,0,1,0"
                BorderBrush="#3FFFFFFF">
            <Grid>
                <!-- Title -->
                <Label x:Name="ColorWheelTitle"
                       Padding="10,10,10,10"
                       FontFamily="{StaticResource Atkinson Hyperlegible}"
                       Content="Theme Color"
                       Foreground="#DDFFFFFF"
                       VerticalContentAlignment="Center"
                       FontSize="13"
                       FontWeight="Normal"
                       VerticalAlignment="Top"
                       Height="40" />

                <!-- Color Wheel Container with Shadow -->
                <Border Width="210"
                        Height="210"
                        Margin="0,50,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        CornerRadius="105">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="20" 
                                          ShadowDepth="0" 
                                          Color="Black" 
                                          Opacity="0.3"/>
                    </Border.Effect>

                    <!-- Color Wheel Canvas -->
                    <Canvas x:Name="ColorWheelCanvas"
                            Width="200"
                            Height="200"
                            Margin="5"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            MouseLeftButtonDown="ColorWheel_MouseDown"
                            MouseMove="ColorWheel_MouseMove"
                            MouseLeftButtonUp="ColorWheel_MouseUp"
                            Cursor="Cross">

                        <!-- Color wheel will be drawn programmatically -->
                        <Ellipse Width="200" Height="200" x:Name="ColorWheelEllipse">
                            <Ellipse.Fill>
                                <RadialGradientBrush>
                                    <GradientStop Color="White" Offset="0"/>
                                    <GradientStop Color="Red" Offset="1"/>
                                </RadialGradientBrush>
                            </Ellipse.Fill>
                        </Ellipse>

                        <!-- Inner shadow overlay for depth -->
                        <Ellipse Width="200" Height="200" IsHitTestVisible="False">
                            <Ellipse.Fill>
                                <RadialGradientBrush>
                                    <GradientStop Color="#00000000" Offset="0.8"/>
                                    <GradientStop Color="#1A000000" Offset="1"/>
                                </RadialGradientBrush>
                            </Ellipse.Fill>
                        </Ellipse>

                        <!-- Selector Circle -->
                        <Grid x:Name="ColorSelector"
                              Width="20"
                              Height="20"
                              Canvas.Left="90"
                              Canvas.Top="90"
                              IsHitTestVisible="False">
                            <!-- Outer ring -->
                            <Ellipse Width="20"
                                     Height="20"
                                     Stroke="White"
                                     StrokeThickness="2">
                                <Ellipse.Effect>
                                    <DropShadowEffect BlurRadius="5" 
                                                      ShadowDepth="0" 
                                                      Color="Black" 
                                                      Opacity="0.5"/>
                                </Ellipse.Effect>
                            </Ellipse>
                            <!-- Inner ring -->
                            <Ellipse Width="16"
                                     Height="16"
                                     Stroke="Black"
                                     StrokeThickness="1"
                                     Margin="2"/>
                            <!-- Center dot -->
                            <Ellipse x:Name="ColorDot"
                                     Width="10"
                                     Height="10"
                                     Fill="Red"
                                     Margin="5"/>
                        </Grid>
                    </Canvas>
                </Border>

                <!-- Brightness Slider Section - Compact design matching other controls -->
                <Grid Height="40" 
                      VerticalAlignment="Bottom" 
                      Margin="0,0,0,50">
                    <Border Background="#1FFFFFFF"
                            CornerRadius="3"
                            Margin="10,5,10,5">
                        <Grid>
                            <Label Content="Brightness"
                                   Foreground="#BBFFFFFF"
                                   FontFamily="{StaticResource Atkinson Hyperlegible}"
                                   FontSize="11"
                                   Padding="10,0,0,0"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Left"/>

                            <!-- Slider with consistent margins like ASlider -->
                            <Grid Margin="75,0,35,0">
                                <!-- Gradient background track -->
                                <Border Height="4" 
                                        CornerRadius="2"
                                        VerticalAlignment="Center">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop x:Name="BrightnessGradientStart" Color="Black" Offset="0"/>
                                            <GradientStop x:Name="BrightnessGradientEnd" Color="Red" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                </Border>

                                <Slider x:Name="BrightnessSlider"
                                        Minimum="0"
                                        Maximum="1"
                                        Value="1"
                                        VerticalAlignment="Center"
                                        ValueChanged="BrightnessSlider_ValueChanged"
                                        Thumb.DragCompleted="BrightnessSlider_DragCompleted">
                                    <Slider.Style>
                                        <Style TargetType="Slider">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Slider">
                                                        <Grid>
                                                            <Track x:Name="PART_Track">
                                                                <Track.Thumb>
                                                                    <Thumb>
                                                                        <Thumb.Template>
                                                                            <ControlTemplate TargetType="Thumb">
                                                                                <Ellipse Width="14" 
                                                                                         Height="14" 
                                                                                         Fill="White"
                                                                                         Stroke="#FF666666"
                                                                                         StrokeThickness="1">
                                                                                    <Ellipse.Effect>
                                                                                        <DropShadowEffect BlurRadius="4" 
                                                                                                          ShadowDepth="1" 
                                                                                                          Color="Black" 
                                                                                                          Opacity="0.3"/>
                                                                                    </Ellipse.Effect>
                                                                                </Ellipse>
                                                                            </ControlTemplate>
                                                                        </Thumb.Template>
                                                                    </Thumb>
                                                                </Track.Thumb>
                                                            </Track>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Slider.Style>
                                </Slider>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>

                <!-- Current Color Preview - Updated styling -->
                <Border Width="282.5"
                        Height="50"
                        VerticalAlignment="Bottom"
                        CornerRadius="0">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#FF1A1A1A" Offset="0"/>
                            <GradientStop Color="#FF0F0F0F" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Live preview circle -->
                        <Ellipse x:Name="ColorPreview"
                                 Grid.Column="0"
                                 Width="30"
                                 Height="30"
                                 HorizontalAlignment="Center"
                                 Margin="10,0,10,0"
                                 Stroke="#FF666666"
                                 StrokeThickness="1">
                            <Ellipse.Fill>
                                <SolidColorBrush Color="#722ED1"/>
                            </Ellipse.Fill>
                            <Ellipse.Effect>
                                <DropShadowEffect BlurRadius="5" 
                                                  ShadowDepth="0" 
                                                  Color="Black" 
                                                  Opacity="0.3"/>
                            </Ellipse.Effect>
                        </Ellipse>

                        <Border Grid.Column="1"
                                Margin="0,10,10,10"
                                Padding="5,0,5,0"
                                VerticalAlignment="Center">
                            <StackPanel Orientation="Vertical"
                                        VerticalAlignment="Center">
                                <Label Content="Current Theme Color"
                                       Foreground="#BBFFFFFF"
                                       FontFamily="{StaticResource Atkinson Hyperlegible}"
                                       FontSize="11"
                                       Padding="0"
                                       Margin="0,0,0,2"/>
                                <Label x:Name="HexValue"
                                       Content="#722ED1"
                                       Foreground="#DDFFFFFF"
                                       FontFamily="Consolas"
                                       FontSize="13"
                                       FontWeight="SemiBold"
                                       Padding="0"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</UserControl>